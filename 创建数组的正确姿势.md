[TOC]
## 创建数组的正确姿势

### JavaScript中数组的特殊性

* 每一项都可以保存任意类型的数据，数组大小可以动态调整，即可以随着数据的添加自动增长以容纳新数据。
* 数组中可能会存在空位
	* 稀疏数组
	
		> 具有不连续索引的数组，其length属性值大于元素的个数。
	* 密集数组
		
		> 具有连续索引的数组，其length属性值等于元素的个数。


### 数组的创建方式

#### 数组字面量
``` js
const arr1 = [];
```
#### 构造函数

``` js
const arr1 = Array(3); // [empty × 3]
const arr2  = Array('3'); //  ["3"]
```

#### of() 方法

``` js
const arr1 = Array.of(3); // [3]
const arr2  = Array.of('3'); // ['3']
```

#### from() 方法

``` js
const arr1 =  Array.from({length: 3}); // [undefined, undefined, undefined]
```

### 稀疏数组

#### 空位的检测
> 空位是没有任何值，可以用in运算符检测。

``` js
const a = [,,,];  // [empty × 3]
0 in a; // false
const b = [1,2,3];
0 in b; //true
```
#### 造成稀疏数组的操作

* delete 操作符

``` js
const b = [1,2,3];
delete b[0];
console.log(b); // [empty, 2, 3]
```

* 构造函数

``` js
const a = Array(3);
console.log(a); // [empty × 3]
```
* 在数组字面量中省略值

``` js
[,,,] // [empty × 3]
```
* 指定数组索引大于数组长度

``` js
const c = [];
c[10] = 0; 
console.log(c); // [empty × 10, 0]
```
* 指定数组长度大于当前数组长度

``` js
const a = [];
a.length = 10; // [empty × 10]
```

#### 操作的不统一

> ES5 对空位的处理，已经很不一致了，大多数情况下会忽略空位。

> * forEach(), filter(), reduce(), every() 和some()都会跳过空位。
> * map()会跳过空位，但会保留这个值。
> * join()和toString()会将空位视为undefined，而undefined和null会被处理成空字符串。 

> ES6 则是明确将空位转为undefined。

> * Array.from方法会将数组的空位，转为undefined。
> * 扩展运算符（...）也会将空位转为undefined。
> * copyWithin()会连空位一起拷贝。
> * fill()会将空位视为正常的数组位置。
> * for...of循环也会遍历空位。
> * entries()、keys()、values()、find()和findIndex()会将空位处理成undefined。

参考：[阮一峰《ECMAScript 6 入门》- 数组的扩展 - 数组的空位](http://es6.ruanyifeng.com/#docs/array)

**注意： 稀疏数组处理有很多不统一的地方，不要创建和使用稀疏数组。**

### 固定长度的 undefined 数组创建
有些时候，我们并不关系数组的内容是什么，我们只是需要一个真正的数组，并且能够使用数组的方法。可以参考以下方法来创建：

1.  Array.apply

	``` js
	<!-- 在创建 undefined 值的数组时有些奇怪和繁琐，但是结果远比 Array(3) 更准确可靠。-->
	Array.apply(null, {length: 4}); // [undefined, undefined, undefined, undefined]
	```

2. Array.from()

	``` js
	<!--将类数组对象转换为数组对象-->
	Array.from({length: 4}); // [undefined, undefined, undefined, undefined]
	```
	
3. 扩展运算符
	
	``` js
	[...Array(4)] // [undefined, undefined, undefined, undefined]
	```

### 参考链接

[阮一峰《ECMAScript 6 入门》- 数组的扩展 - 数组的空位](http://es6.ruanyifeng.com/#docs/array)

[创建0-100的数组](https://www.jianshu.com/p/d6f855e5bc5c)

[稀疏数组和filter方法](https://github.com/congtou221/blog/issues/7)